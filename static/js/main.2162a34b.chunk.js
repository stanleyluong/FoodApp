(this.webpackJsonpfoodapp=this.webpackJsonpfoodapp||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),i=n(8),o=n.n(i),r=(n(15),n(6)),c=n.n(r),l=n(9),u=n(1),h=n(2),p=n(5),d=n(4),m=n(3),g=(n(17),n(18),n(19),"7R8guCX9uPFAVZ5J4nrHFt8c402C8uWMCIZnyD2MEUKl6tI5nHFGHObPB26_kp3DfmRItpDo2fVyH9uOLX7v9PdKuDsQF9IKufojEO1Wj68hxrcwwIxfXGYrwh2KX3Yx"),v={search:function(e,t,n){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(n,"&limit=50"),{headers:{Authorization:"Bearer ".concat(g)}}).then((function(e){return e.json()})).then((function(e){if(e.businesses)return e.businesses.map((function(e){return console.log(e),{id:e.id,alias:e.alias,image_url:e.image_url,categories:e.categories,coordinates:e.coordinates,display_phone:e.display_phone,distance:e.distance,is_closed:e.is_closed,location:e.location,name:e.name,phone:e.phone,price:e.price,rating:e.rating,review_count:e.review_count,url:e.url}}))}))},searchGeo:function(e,t,n,s){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&latitude=").concat(t,"&longitude=").concat(n,"&sort_by=").concat(s,"&limit=50"),{headers:{Authorization:"Bearer ".concat(g)}}).then((function(e){return e.json()})).then((function(e){if(e.businesses)return e.businesses.map((function(e){return{id:e.id,alias:e.alias,image_url:e.image_url,categories:e.categories,coordinates:e.coordinates,display_phone:e.display_phone,distance:e.distance,is_closed:e.is_closed,location:e.location,name:e.name,phone:e.phone,price:e.price,rating:e.rating,review_count:e.review_count,url:e.url}}))}))},getReviews:function(e){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/".concat(e,"/reviews"),{headers:{Authorization:"Bearer ".concat(g)}}).then((function(e){return e.json()})).then((function(e){if(e.reviews)return e.reviews.map((function(e){return console.log(e),{id:e.id,rating:e.rating,user:{id:e.user.id,image_url:e.user.image_url},text:e.text,time_created:e.time_created}}))}))}},b=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return console.log(this.props.review),a.a.createElement("div",{className:"Review"},a.a.createElement("img",{style:{width:"100%"},src:this.props.review.user.image_url,alt:""}),a.a.createElement("p",null,"Rating: ",this.props.review.rating," Stars"),a.a.createElement("p",null,'"',this.props.review.text,'"'),a.a.createElement("p",null,"Review Date: ",this.props.review.time_created))}}]),n}(a.a.Component),f=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={reviews:[]},s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.id,"reviews line 13"),v.getReviews(this.props.id).then((function(t){e.setState({reviews:t})}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"Reviews",id:"Reviews"},this.state.reviews.map((function(e){return a.a.createElement(b,{key:e.id,review:e})})))}}]),n}(a.a.Component),E=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).toggleReviews=function(){s.setState({showReviews:!s.state.showReviews})},s.state={showReviews:!1},s}return Object(h.a)(n,[{key:"render",value:function(){var e=[this.props.business.location.address1,this.props.business.location.address2,this.props.business.location.address3,this.props.business.location.city,this.props.business.location.state,this.props.business.location.zip_code].filter((function(e){return""!==e})).join(" ").split(" ").join("+");return a.a.createElement("div",{className:"Business"},a.a.createElement("div",{className:"image-container"},a.a.createElement("a",{href:this.props.business.url,target:"_blank",rel:"noopener noreferrer"},a.a.createElement("img",{src:this.props.business.image_url,alt:"uh oh"}))),a.a.createElement("h2",null,this.props.business.name),a.a.createElement("div",{className:"Business-information"},a.a.createElement("div",{className:"Business-address"},a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://maps.google.com/maps?q=".concat(e)},a.a.createElement("p",null,this.props.business.location.address1),a.a.createElement("p",null,this.props.business.location.address2),a.a.createElement("p",null,this.props.business.location.address3),a.a.createElement("p",null,this.props.business.location.city," ",this.props.business.location.state),a.a.createElement("p",null,this.props.business.location.zip_code)),a.a.createElement("p",null,Math.floor(this.props.business.distance)," meters away"),a.a.createElement("p",null,this.props.business.display_phone),a.a.createElement("p",null,this.props.business.is_closed?"Closed":"Open"),a.a.createElement("p",null,this.props.business.price)),a.a.createElement("div",{className:"Business-reviews"},a.a.createElement("h3",null,this.props.business.categories[0].title,this.props.business.categories[1]?" + "+this.props.business.categories[1].title:""),a.a.createElement("h3",{className:"rating"},this.props.business.rating," ",a.a.createElement("img",{style:{width:"1.5rem"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAvVBMVEX////42B8AAAD/3iB0dHSokhX83CC8pBiKeBHixBweHh7nyh0+Pj7cvxv/4CCOjo62nhd9fX3tzx4wMDCCcRDz1B6SfxJLS0vIyMienp7i4uK0tLSlpaXc3Nz09PTJrxmhjBSWlpZWVlbPtRpeUgx6ag8vKQaZhhNUSQuMjZNCRE2wnDF6e4FwcXiwnj/Apxi2t7sMER+hjy81N0BPUVmPgkVwZjmcjDhwYg49OCARDwKBcisnKTFEOwnMzdB/LrixAAADxUlEQVR4nO3d21baQABGYYEagUhEFKtoi0oteMLzWfv+j9W7Mn9WM83MmpDE7n0bkpmP0LWYJsGVlWW11zTbW9q4ywth/UNY/xDWP4T1D2H9Q1j/PqNwQ0yrUWNRtCrbNsqeqmcpYcsQtj6l8POfQ4Q1DCHC6ocQYfVDiLD6IURY/RAirH4IEVY/hAir3+cXnoriUISHsu207Knm7mj966Kz87hjNGiYDcxN8fmZsd/6UdkMS5tyZvqtyKihmZtafdlvs2yGpZQwrcoqQlidECJEWH4IESIsP4QIEZYfQoQIyw8hQoTlhxBh9YUXQYQXhcztS4gu52OzOCew0Yhlv/llkNmkhM0gjRPLlQrrWTRKxmEmU4jwykWVqb0KMxmEXiFEiNAphF4hRIjQqSUIo5aZ4i3bliLsr/klq4mof7K96GQsd32NZZuus2LP0fsOQvmu75CcplZbjmm7c6/dkj19R3cQDnP+k7HmL/RsiBChawgROocQoXMIETrnImwk5jf/CgvNaSb276X7Ztc7Zu3Bv0cqSThoy0yvRbFi60bGj/3WtcULo1iOcmM1ad1aCrsIESJEiBAhQoT/mVB2bA78VhrFCGU1MdCJOggPpNtDo2nuO50KEcZTczK3OlEHoXYns+nl/cwWIYx6st+dt0lbr6xwHSFChAgRIkSIEOGftuSonbz344cSyn38HdlvK5Dw4Mhs3jdataw0ojW5+jER4USuOKxZ3ql41RxwLnPxX03Yupd3cWKZm+d9bamDTGS8+0JM2nFuYZBSwmOECBEiRIgQIUKEucr/vbQIYTHfS3elh23zSYncq0VvYc98MmP7QScTSJheH+ZcFYQiytWmYtaHnmv8QriV+l8MhAgRIkSIECFChAgRIkSIECFChAgRIkSYMbuc91ItRfjNbPT4w2jW8ZxdPOktmuT/fVoVdmbmZB5HMlMHobxRzUFi5gls7cgxdzyfT49kLv7PzAR57iklnMoxpyF+RaHsJ7s0hD4hRIjQLYQ+IUSI8K9jZpakhEn2S6sslD/ErcVP5t/ePnuyvbS6wuS5mZ3+MtW+5ZXPSXWFJ0GEJwgRIkSIECFChAhLE+pTyQdLF343W3n5afSq3/UH2Q3f3rey6qbOYTfzle9vQ8sYMpf41ZzoS0qh6buoVwf0PH1Y3v1fDp+T7H5ZRvhIzUauqOhLrULLb0EnM8v4YZ5h2bWMMLN8ggP92jVChAgRIkSIEGF9hNmrieoKI85h3kZBFL6N8k80tSdChMsKIUKECIsPIUKECIvPXfgbcy4yp3UfO+cAAAAASUVORK5CYII=",alt:"uh oh"})))),a.a.createElement("button",{onClick:this.toggleReviews},this.state.showReviews?"Hide":"Show"," ",this.props.business.review_count+" Reviews"),this.state.showReviews&&a.a.createElement(f,{id:this.props.business.id}))}}]),n}(a.a.Component),w=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"BusinessList",id:"BusinessList"},this.props.businesses.map((function(e){return a.a.createElement(E,{key:e.id,business:e})})))}}]),n}(a.a.Component),y=(n(20),function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={term:"",location:"",sortBy:"best_match",placeholder:"Near..."},s.handleTermChange=s.handleTermChange.bind(Object(p.a)(s)),s.handleLocationChange=s.handleLocationChange.bind(Object(p.a)(s)),s.handleSortByChange=s.handleSortByChange.bind(Object(p.a)(s)),s.handleSearch=s.handleSearch.bind(Object(p.a)(s)),s.sortByOptions={"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count",Distance:"distance"},s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){if("Current Location"===this.props.location){var e=document.getElementById("loc");e.addEventListener("focus",(function(){this.classList.add("placeholderred")})),e.addEventListener("blur",(function(){this.classList.remove("placeholderred")}))}}},{key:"getSortByClass",value:function(e){return this.state.sortBy===e?"active":""}},{key:"handleSortByChange",value:function(e){this.setState({sortBy:e})}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value})}},{key:"handleSearch",value:function(e){console.log(this.state.term,this.state.location,this.state.sortBy),this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy),e.preventDefault()}},{key:"renderSortByOptions",value:function(){var e=this;return Object.keys(this.sortByOptions).map((function(t){var n=e.sortByOptions[t];return a.a.createElement("li",{onClick:e.handleSortByChange.bind(e,n),className:e.getSortByClass(n),key:n},t)}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"SearchBar",id:"searchbar"},a.a.createElement("div",{className:"SearchBar-sort-options"},a.a.createElement("ul",null,this.renderSortByOptions())),a.a.createElement("div",{className:"SearchBar-fields"},a.a.createElement("form",{onSubmit:this.handleSearch},a.a.createElement("input",{onChange:this.handleTermChange,placeholder:"Find..."}),a.a.createElement("input",{id:"loc",onChange:this.handleLocationChange,placeholder:this.props.placeholder}),a.a.createElement("button",{onClick:this.handleSearch,className:"SearchBar-submit"},"Search"))))}}]),n}(a.a.Component)),S=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={businesses:[],latitude:0,longitude:0,placeholder:"Near...",location:{},granted:!1},s.searchYelp=s.searchYelp.bind(Object(p.a)(s)),s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){if("geolocation"in navigator){console.log("Available"),this.setState({placeholder:"Loading Location..."});var e=this;navigator.geolocation.getCurrentPosition((function(t){function n(){return(n=Object(l.a)(c.a.mark((function t(){var n,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e.state.latitude,"&longitude=").concat(e.state.longitude,"&localityLanguage=en"));case 2:return n=t.sent,t.next=5,n.json();case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log("Latitude is :",t.coords.latitude),console.log("Longitude is :",t.coords.longitude),e.setState({latitude:t.coords.latitude,longitude:t.coords.longitude,granted:!0}),function(){return n.apply(this,arguments)}().then((function(t){console.log(t),e.setState({placeholder:"Current Location",location:t})}))}))}else console.log("Not Available")}},{key:"componentDidUpdate",value:function(){document.getElementById("BusinessList").scrollIntoView({behavior:"smooth"})}},{key:"searchYelp",value:function(e,t,n){var s=this;""===t&&(this.state.granted?(console.log("searchgeo"),v.searchGeo(e,this.state.latitude,this.state.longitude,n).then((function(e){s.setState({businesses:e})}))):alert("Allow Location or Enter Location")),""!==t&&(console.log("searchyelp"),v.search(e,t,n).then((function(e){s.setState({businesses:e})})))}},{key:"render",value:function(){return a.a.createElement("div",{className:"App",id:"app"},a.a.createElement(y,{searchYelp:this.searchYelp,placeholder:this.state.placeholder}),a.a.createElement(w,{businesses:this.state.businesses}))}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.2162a34b.chunk.js.map